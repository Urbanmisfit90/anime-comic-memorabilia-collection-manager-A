<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Collection Manager</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100 text-gray-800">
  <div class="container mx-auto px-4 py-6">

    <header class="mb-6">
      <h1 class="text-4xl font-extrabold text-center text-blue-600">Collection Manager</h1>
      <p class="text-center text-gray-600 mt-2">Manage your collection efficiently and effortlessly with our intuitive tools.</p>
    </header>

    <main class="flex flex-col items-center space-y-4">
      <!-- Form to Add/Edit Items -->
      <div class="bg-white p-4 shadow rounded">
        <form id="itemForm" enctype="multipart/form-data">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <input type="text" id="name" class="border p-2 rounded" placeholder="Item Name" required>
            <input type="text" id="brand" class="border p-2 rounded" placeholder="Brand" required>
            <input type="text" id="series" class="border p-2 rounded" placeholder="Series">
            <input type="text" id="character" class="border p-2 rounded" placeholder="Character">
            <select id="type" class="border p-2 rounded">
              <option value="">Select Type</option>
              <option value="Action Figure">Action Figure</option>
              <option value="Prop">Prop</option>
              <option value="Box Set">Box Set</option>
            </select>
            <select id="condition" class="border p-2 rounded">
              <option value="">Select Condition</option>
              <option value="New">New</option>
              <option value="Mint">Mint</option>
              <option value="Used">Used</option>
            </select>
            <input type="text" id="tags" class="border p-2 rounded" placeholder="Tags (comma-separated)">
            <input type="file" id="photo" class="border p-2 rounded">
          </div>
          <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4">Save Item</button>
        </form>
      </div>

      <!-- Collection Display -->
      <div class="bg-white p-4 shadow rounded">
        <h2 class="text-2xl font-bold mb-4">My Collection</h2>
        <div id="collection" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- Items will be rendered here dynamically -->
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white text-center py-4 mt-8">
      <p>Â© 2024 Collection Manager. All rights reserved.</p>
    </footer>
  </div>

  <script>
    // Get references to form elements
    const itemForm = document.getElementById("itemForm");
    const collectionDiv = document.getElementById("collection");

    // Edit Mode Flag
    let editMode = false;
    let editIndex = -1;

    // Function to save item to localStorage
    function saveItem(item) {
      let collection = JSON.parse(localStorage.getItem("collection") || "[]");

      if (editMode) {
        // If in edit mode, update the existing item
        collection[editIndex] = item;
        editMode = false;
      } else {
        // Otherwise, add a new item
        collection.push(item);
      }

      localStorage.setItem("collection", JSON.stringify(collection));
      renderCollection();
    }

    // Function to render collection items from localStorage
    function renderCollection() {
      collectionDiv.innerHTML = "";
      const collection = JSON.parse(localStorage.getItem("collection") || "[]");

      collection.forEach((item, index) => {
        const itemDiv = document.createElement("div");
        itemDiv.classList.add("bg-gray-200", "p-4", "rounded", "shadow");
        itemDiv.innerHTML = `
          <h3 class="text-xl font-semibold">${item.name}</h3>
          <p>Brand: ${item.brand}</p>
          <p>Series: ${item.series}</p>
          <p>Character: ${item.character}</p>
          <p>Type: ${item.type}</p>
          <p>Condition: ${item.condition}</p>
          <p>Tags: ${item.tags}</p>
          ${item.photo ? `<img src="${item.photo}" alt="${item.name}" class="w-32 h-32 object-cover mt-4 rounded">` : ''}
          <div class="flex justify-between mt-4">
            <button class="bg-yellow-500 text-white font-bold py-2 px-4 rounded" onclick="editItem(${index})">Edit</button>
            <button class="bg-red-500 text-white font-bold py-2 px-4 rounded" onclick="deleteItem(${index})">Delete</button>
          </div>
        `;
        collectionDiv.appendChild(itemDiv);
      });
    }

    // Function to edit an item
    function editItem(index) {
      const collection = JSON.parse(localStorage.getItem("collection"));
      const item = collection[index];

      // Populate the form with the item data
      document.getElementById("name").value = item.name;
      document.getElementById("brand").value = item.brand;
      document.getElementById("series").value = item.series;
      document.getElementById("character").value = item.character;
      document.getElementById("type").value = item.type;
      document.getElementById("condition").value = item.condition;
      document.getElementById("tags").value = item.tags;

      // Set the edit mode and index
      editMode = true;
      editIndex = index;
    }

    // Function to delete an item
    function deleteItem(index) {
      let collection = JSON.parse(localStorage.getItem("collection"));
      collection.splice(index, 1); // Remove the item at the given index
      localStorage.setItem("collection", JSON.stringify(collection));
      renderCollection();
    }

    // Handle form submission
    itemForm.addEventListener("submit", (event) => {
      event.preventDefault();

      // Get values from form inputs
      const item = {
        name: document.getElementById("name").value,
        brand: document.getElementById("brand").value,
        series: document.getElementById("series").value,
        character: document.getElementById("character").value,
        type: document.getElementById("type").value,
        condition: document.getElementById("condition").value,
        tags: document.getElementById("tags").value,
        photo: document.getElementById("photo").files[0] ? URL.createObjectURL(document.getElementById("photo").files[0]) : null
      };

      // Save item to localStorage
      saveItem(item);

      // Clear form
      itemForm.reset();
    });

    // Render collection when the page loads
    renderCollection();
  </script>
</body>

</html>
